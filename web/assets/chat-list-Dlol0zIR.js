import{r as p,j as a}from"./index-DdTZBDI5.js";import{L as x,a as j}from"./ListGroup-a-V3Uw_0.js";import"./objectWithoutPropertiesLoose-DOI8zw2D.js";let m;function y({auth:t,setActiveChatId:s,height:o,chatRef:n}){const[c,r]=p.useState([]),[d,u]=p.useState(void 0),f=g(t);function g(e){return!!(e.token&&e.emailAddress&&e.backendURL)}return p.useEffect(()=>{async function e(){if(f){let i=await L(t);r(i==null?void 0:i.chatResults.map(l=>l.chat))}}e()},[d]),a.jsx(x,{className:"list-group flex-column nav col-4",style:{marginBottom:o},children:c.map(e=>a.jsx(v,{onClick:()=>{s(e.id),m=e.id},chat:e,deleteChat:i=>{w(t,i).then(l=>{var h;l===200&&(m===i&&(s(""),(h=n==null?void 0:n.current)==null||h.clearChat()),u(Math.random()))})}},"chat_"+e.id))})}function v({chat:t,deleteChat:s,onClick:o}){const n=new Date(t.updateTime*1e3),c=n.toDateString()+" "+n.toLocaleTimeString(),r=t.id;return a.jsxs(j,{action:!0,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",onClick:o,children:[t.name,a.jsxs("div",{children:[a.jsx("span",{className:"badge bg-primary rounded-pill overflow-hidden d-block",children:c}),a.jsx("span",{className:"badge bg-danger rounded-pill overflow-hidden m-1",style:{display:"block",float:"right"},onClick:d=>{d.stopPropagation(),s(r)},children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",children:[a.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),a.jsx("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})]})})]})]},r)}async function w(t,s){return(await fetch(`/api/chat?chatId=${s}`,{method:"DELETE",headers:{"content-type":"application/json",Authorization:`${t.token}`,"x-api-host":t.backendURL}})).status}async function L(t){const s={method:"GET",headers:{Authorization:`${t.token}`,"x-api-host":t.backendURL}};return await(await fetch("/api/chat",s)).json()}export{y as default};
